#include "Juego.h"
#include "conio.h"

Juego::Juego() {
	escenario = nullptr;
}

Juego::~Juego() {
	delete escenario;
}

void Juego::Instrucciones()
{
	System::Console::Clear();
	cout << "\n\n\t***********************************************************************" << endl;
	cout << "\t*                               Instrucciones                         *" << endl;
	cout << "\t***********************************************************************" << endl;
	cout << "\t1. Eres el 'Guardian del medio ambiente'." << endl;
	cout << "\t2. Tu mision es restaurar el sistema contaminado." << endl;
	cout << "\t3. Debes moverte por el mapa usando las teclas de direccion." << endl;
	cout << "\t4. Recoge los siguientes recursos para reforestar y ganar:" << endl;
	cout << "\t   - Agua "; 
	System::Console::ForegroundColor = System::ConsoleColor::Blue;
	cout << "~~"; System::Console::ResetColor(); 
	cout << ": Necesaria para regar las semillas." << endl;
	System::Console::ForegroundColor = System::ConsoleColor::Blue;
	cout << "\t          ~~" << endl; System::Console::ResetColor();
	cout << "\t   - Semillas "; 
	System::Console::ForegroundColor = System::ConsoleColor::Green;
	cout << "**"; 
	System::Console::ResetColor();
	cout << ": Usadas para plantar los arboles." << endl;
	System::Console::ForegroundColor = System::ConsoleColor::Green;
	cout << "\t              **" << endl; System::Console::ResetColor();
	cout << "\t   - Arboles ";
	System::Console::ForegroundColor = System::ConsoleColor::DarkYellow;
	cout << "**";
	System::Console::ResetColor();
	cout << ": Sirven para reforestar el escenario." << endl;
	System::Console::ForegroundColor = System::ConsoleColor::DarkYellow;
	cout << "\t             **" << endl; System::Console::ResetColor();
	cout << "\t   - Residuos Reciclables ";
	System::Console::ForegroundColor = System::ConsoleColor::DarkGray;  
	cout << "##";
	System::Console::ResetColor();
	cout << ": Para limpiar el ambiente." << endl;
	System::Console::ForegroundColor = System::ConsoleColor::DarkGray;
	cout << "\t                          ##" << endl; System::Console::ResetColor();
	cout << "\t5. Evita las fuentes de contaminacion, que son los enemigos ";
	System::Console::ForegroundColor = System::ConsoleColor::Red;
	cout << "XX." << endl;
	cout << "\t                                                            XX." << endl; System::Console::ResetColor();
	cout << "\t6. Perderas una vida si chocas con uno de ellos." << endl;
	cout << "\t7. Reforesta el 70% del mapa antes de que termine el tiempo para ganar." << endl;
	cout << "\t8. Si pierdes todas las vidas o se agota el tiempo, perderas el juego." << endl;
	cout << "\t9. Tienes 120 segundos para lograr reforestar el escenario." << endl;
	cout << "\t***********************************************************************" << endl;
	cout << "\t*                           Buena Suerte Guardian!                    *" << endl;
	cout << "\t***********************************************************************" << endl;
	cout << endl;
	cout << "\tPresiona cualquier tecla..." << endl;
	_getch();
}

void Juego::color(int n) {
	switch (n) {
	case 1:
		System::Console::BackgroundColor = System::ConsoleColor::Black;
		break;
	case 2:
		System::Console::BackgroundColor = System::ConsoleColor::Blue;
		break;
	case 3:
		System::Console::BackgroundColor = System::ConsoleColor::Cyan;
		break;
	case 4:
		System::Console::BackgroundColor = System::ConsoleColor::DarkBlue;
		break;
	case 5:
		System::Console::BackgroundColor = System::ConsoleColor::DarkCyan;
		break;
	case 6:
		System::Console::BackgroundColor = System::ConsoleColor::DarkGray;
		break;
	case 7:
		System::Console::BackgroundColor = System::ConsoleColor::DarkGreen;
		break;
	case 8:
		System::Console::BackgroundColor = System::ConsoleColor::DarkMagenta;
		break;
	case 9:
		System::Console::BackgroundColor = System::ConsoleColor::DarkRed;
		break;
	case 10:
		System::Console::BackgroundColor = System::ConsoleColor::DarkYellow;
		break;
	case 11:
		System::Console::BackgroundColor = System::ConsoleColor::Gray;
		break;
	case 12:
		System::Console::BackgroundColor = System::ConsoleColor::Green;
		break;
	case 13:
		System::Console::BackgroundColor = System::ConsoleColor::Magenta;
		break;
	case 14:
		System::Console::BackgroundColor = System::ConsoleColor::Red;
		break;
	case 15:
		System::Console::BackgroundColor = System::ConsoleColor::White;
		break;
	case 16:
		System::Console::BackgroundColor = System::ConsoleColor::Yellow;
		break;
	}
}

void Juego::menu() {
	int logo[35][90] = {
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,11,1,1,1,1,1,11,11,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,11,11,11,1,1,11,11,11,1,1,1,11,11,1,11,11,11,11,11,11,1,11,11,11,11,11,11,11,1,11,11,11,11,11,11,1,1,1,11,11,11,1,1,1,1,11,11,11,1,1,1,11,11,11,1,1,1,1,11,11,11,11,11,1,11,11,11,11,11,11,11,1,11,11,11,11,11,11,1,11,11,11,11,11,11,11,1},
	{1,1,1,1,11,11,1,1,11,11,11,1,1,11,11,11,1,11,11,11,11,11,11,1,11,11,11,11,11,11,11,1,11,11,11,11,11,11,11,1,1,11,11,11,1,1,1,11,11,11,11,1,1,1,11,11,11,1,1,1,11,11,11,6,11,11,1,11,11,11,11,11,11,11,1,11,11,11,11,11,11,1,11,11,11,11,11,11,11,11},
	{1,1,1,1,11,11,1,1,11,11,11,1,1,11,11,1,1,11,11,1,1,1,1,1,11,11,1,1,1,1,1,1,11,11,1,1,1,11,11,11,1,11,11,11,11,1,1,11,11,11,11,1,1,11,11,1,11,11,1,1,11,11,1,1,1,1,1,1,1,11,11,11,1,1,1,11,11,1,1,1,1,1,11,11,1,1,1,1,11,11},
	{1,1,1,1,11,11,1,1,11,11,11,11,1,11,11,1,1,11,11,6,6,1,1,1,11,11,1,1,1,1,1,1,11,11,1,1,1,1,11,11,1,11,11,11,11,1,11,11,1,11,11,1,1,11,11,1,11,11,1,1,11,11,11,11,1,1,1,1,1,11,11,11,1,1,1,11,11,1,1,1,1,1,11,11,1,1,1,1,11,11},
	{1,1,1,1,1,11,11,11,11,1,11,11,1,11,11,1,1,11,11,11,11,11,11,1,11,11,11,11,11,11,1,1,11,11,1,1,1,1,11,11,1,11,11,1,11,11,11,1,1,11,11,1,11,11,6,1,11,11,1,1,1,11,11,11,11,11,1,1,1,11,11,11,1,1,1,11,11,11,11,11,11,1,11,11,11,11,11,11,11,11},
	{1,1,1,1,1,11,11,11,11,1,11,11,11,11,11,1,1,11,11,6,11,6,11,1,11,11,6,11,11,11,1,1,11,11,1,1,1,1,11,11,1,11,11,1,1,11,11,1,1,11,11,1,11,11,11,11,11,11,11,1,1,1,1,1,11,11,11,1,1,11,11,11,1,1,1,11,11,6,6,6,0,1,11,11,11,11,11,11,1,1},
	{1,1,1,1,1,11,11,11,11,1,1,11,11,11,1,1,1,11,11,1,1,1,1,1,11,11,1,1,1,1,1,1,11,11,1,1,1,11,11,11,1,11,11,1,1,1,1,1,1,11,11,1,11,11,11,11,11,11,11,1,11,11,1,1,1,11,11,1,1,11,11,11,1,1,1,11,11,1,1,1,1,1,11,11,1,1,11,11,11,1},
	{1,1,1,1,1,1,11,11,1,1,1,11,11,11,1,1,1,11,11,11,11,11,11,1,11,11,11,11,11,11,11,1,11,11,11,11,11,11,11,1,1,11,11,1,1,1,1,1,1,11,11,11,11,1,1,1,1,11,11,11,11,11,11,11,11,11,11,1,1,11,11,11,1,1,1,11,11,11,11,11,11,11,11,11,1,1,1,11,11,1},
	{1,1,1,1,1,1,11,11,1,1,1,11,11,11,1,1,1,11,11,11,11,11,11,1,11,11,11,11,11,11,11,1,11,11,11,11,11,1,1,1,1,11,11,1,1,1,1,1,1,11,11,11,11,1,1,1,1,1,11,11,1,11,11,11,11,11,1,1,1,11,11,11,1,1,1,11,11,11,11,11,11,11,11,11,1,1,1,11,11,11},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,1,1,1,1,1,1,1,1,1,11,11,1,1,1,1,1,1,1,1,1,1,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,6,6,6,6,6,6,6,0,0,11,11,11,11,11,1},
	{1,1,1,1,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,1,1,1,11,11,1,1,1,1,11,11,11,1,1,1,1,11,6,1,1,6,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,11,1,1,1,11,11,11,1,1,11,11,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,11,11,1,1,11,11,11,1,11,11,11,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,11,11,1,11,11,1,1,11,11,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,11,1,11,11,1,1,11,11,1,1,1,1,1,1,1,11,11,1,11,11,1,11,11,11,1,1,1,1,1,1,1,11,1,6,11,1,11,1,1,11,6,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6,11,11,1,11,11,1,1,11,11,1,1,1,1,1,1,1,1,11,11,1,11,1,11,11,1,1,1,1,1,1,1,1,11,1,1,11,1,11,1,1,11,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,11,11,11,11,11,1,11,11,11,1,11,11,11,11,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,11,11,11,11,11,11,11,11,11,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6,11,11,1,11,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,11,11,1,1,1,11,11,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
	{1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
	};

	System::Console::SetWindowSize(100, 60);
	srand(time(nullptr));
	int x = 10;
	int y = 38;
	int opc = 0;
	do {
		System::Console::Clear();
		escenario = new Escenario();

		for (int i = 0; i < 35; i++) {
			for (int j = 0; j < 90; j++) {
				color(logo[i][j]);
				System::Console::SetCursorPosition(2 + j, 5 + i);
				cout << " ";
			}
		}

		System::Console::SetCursorPosition(x + 30, y);
		cout << "1. Iniciar Juego";
		System::Console::SetCursorPosition(x + 30, y + 1);
		cout << "2. Manual";
		System::Console::SetCursorPosition(x + 30, y + 2);
		cout << "9. Salir";
		System::Console::SetCursorPosition(x, y + 9);
		cout << "Angel Villarreal (U202417857), Elias Ramos(U20201A277), Joel Mora(U20241B227)";
		System::Console::SetCursorPosition(x + 15, y + 10);
		cout << "©2024 WeedMaster. Todos los derechos reservados.";
		System::Console::SetCursorPosition(x + 25, y + 4);
		cout << "Seleccione una opcion: ";
		cin >> opc;
		switch (opc) {
		case 1:
			Instrucciones();
			escenario->play();
			break;
		case 2:
			Instrucciones();
			break;
		case 9:
			break;
		default:
			break;
		}
	} while (opc != 9);

}
